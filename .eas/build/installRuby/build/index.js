(()=>{var e={927:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const r=s(n(746));function spawnAsync(e,t,n={}){const s=new Error;const o=s.stack?s.stack.replace(/^.*/,"    ..."):null;let i;let c=new Promise(((s,c)=>{let{ignoreStdio:a,...l}=n;i=(0,r.default)(e,t,l);let u="";let f="";if(!a){if(i.stdout){i.stdout.on("data",(e=>{u+=e}))}if(i.stderr){i.stderr.on("data",(e=>{f+=e}))}}let completionListener=(n,r)=>{i.removeListener("error",errorListener);let a={pid:i.pid,output:[u,f],stdout:u,stderr:f,status:n,signal:r};if(n!==0){let s=t&&t.length>0?` ${t.join(" ")}`:"";let i=r?new Error(`${e}${s} exited with signal: ${r}`):new Error(`${e}${s} exited with non-zero code: ${n}`);if(i.stack&&o){i.stack+=`\n${o}`}Object.assign(i,a);c(i)}else{s(a)}};let errorListener=e=>{if(a){i.removeListener("exit",completionListener)}else{i.removeListener("close",completionListener)}Object.assign(e,{pid:i.pid,output:[u,f],stdout:u,stderr:f,status:null,signal:null});c(e)};if(a){i.once("exit",completionListener)}else{i.once("close",completionListener)}i.once("error",errorListener)}));c.child=i;return c}e.exports=spawnAsync},746:(e,t,n)=>{"use strict";const s=n(81);const r=n(855);const o=n(101);function spawn(e,t,n){const i=r(e,t,n);const c=s.spawn(i.command,i.args,i.options);o.hookChildProcess(c,i);return c}function spawnSync(e,t,n){const i=r(e,t,n);const c=s.spawnSync(i.command,i.args,i.options);c.error=c.error||o.verifyENOENTSync(c.status,i);return c}e.exports=spawn;e.exports.spawn=spawn;e.exports.sync=spawnSync;e.exports._parse=r;e.exports._enoent=o},101:e=>{"use strict";const t=process.platform==="win32";function notFoundError(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function hookChildProcess(e,n){if(!t){return}const s=e.emit;e.emit=function(t,r){if(t==="exit"){const t=verifyENOENT(r,n,"spawn");if(t){return s.call(e,"error",t)}}return s.apply(e,arguments)}}function verifyENOENT(e,n){if(t&&e===1&&!n.file){return notFoundError(n.original,"spawn")}return null}function verifyENOENTSync(e,n){if(t&&e===1&&!n.file){return notFoundError(n.original,"spawnSync")}return null}e.exports={hookChildProcess:hookChildProcess,verifyENOENT:verifyENOENT,verifyENOENTSync:verifyENOENTSync,notFoundError:notFoundError}},855:(e,t,n)=>{"use strict";const s=n(17);const r=n(274);const o=n(48);const i=n(252);const c=process.platform==="win32";const a=/\.(?:com|exe)$/i;const l=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function detectShebang(e){e.file=r(e);const t=e.file&&i(e.file);if(t){e.args.unshift(e.file);e.command=t;return r(e)}return e.file}function parseNonShell(e){if(!c){return e}const t=detectShebang(e);const n=!a.test(t);if(e.options.forceShell||n){const n=l.test(t);e.command=s.normalize(e.command);e.command=o.command(e.command);e.args=e.args.map((e=>o.argument(e,n)));const r=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${r}"`];e.command=process.env.comspec||"cmd.exe";e.options.windowsVerbatimArguments=true}return e}function parse(e,t,n){if(t&&!Array.isArray(t)){n=t;t=null}t=t?t.slice(0):[];n=Object.assign({},n);const s={command:e,args:t,options:n,file:undefined,original:{command:e,args:t}};return n.shell?s:parseNonShell(s)}e.exports=parse},48:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;function escapeCommand(e){e=e.replace(t,"^$1");return e}function escapeArgument(e,n){e=`${e}`;e=e.replace(/(\\*)"/g,'$1$1\\"');e=e.replace(/(\\*)$/,"$1$1");e=`"${e}"`;e=e.replace(t,"^$1");if(n){e=e.replace(t,"^$1")}return e}e.exports.command=escapeCommand;e.exports.argument=escapeArgument},252:(e,t,n)=>{"use strict";const s=n(147);const r=n(32);function readShebang(e){const t=150;const n=Buffer.alloc(t);let o;try{o=s.openSync(e,"r");s.readSync(o,n,0,t,0);s.closeSync(o)}catch(e){}return r(n.toString())}e.exports=readShebang},274:(e,t,n)=>{"use strict";const s=n(17);const r=n(207);const o=n(539);function resolveCommandAttempt(e,t){const n=e.options.env||process.env;const i=process.cwd();const c=e.options.cwd!=null;const a=c&&process.chdir!==undefined&&!process.chdir.disabled;if(a){try{process.chdir(e.options.cwd)}catch(e){}}let l;try{l=r.sync(e.command,{path:n[o({env:n})],pathExt:t?s.delimiter:undefined})}catch(e){}finally{if(a){process.chdir(i)}}if(l){l=s.resolve(c?e.options.cwd:"",l)}return l}function resolveCommand(e){return resolveCommandAttempt(e)||resolveCommandAttempt(e,true)}e.exports=resolveCommand},126:(e,t,n)=>{var s=n(147);var r;if(process.platform==="win32"||global.TESTING_WINDOWS){r=n(1)}else{r=n(728)}e.exports=isexe;isexe.sync=sync;function isexe(e,t,n){if(typeof t==="function"){n=t;t={}}if(!n){if(typeof Promise!=="function"){throw new TypeError("callback not provided")}return new Promise((function(n,s){isexe(e,t||{},(function(e,t){if(e){s(e)}else{n(t)}}))}))}r(e,t||{},(function(e,s){if(e){if(e.code==="EACCES"||t&&t.ignoreErrors){e=null;s=false}}n(e,s)}))}function sync(e,t){try{return r.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||e.code==="EACCES"){return false}else{throw e}}}},728:(e,t,n)=>{e.exports=isexe;isexe.sync=sync;var s=n(147);function isexe(e,t,n){s.stat(e,(function(e,s){n(e,e?false:checkStat(s,t))}))}function sync(e,t){return checkStat(s.statSync(e),t)}function checkStat(e,t){return e.isFile()&&checkMode(e,t)}function checkMode(e,t){var n=e.mode;var s=e.uid;var r=e.gid;var o=t.uid!==undefined?t.uid:process.getuid&&process.getuid();var i=t.gid!==undefined?t.gid:process.getgid&&process.getgid();var c=parseInt("100",8);var a=parseInt("010",8);var l=parseInt("001",8);var u=c|a;var f=n&l||n&a&&r===i||n&c&&s===o||n&u&&o===0;return f}},1:(e,t,n)=>{e.exports=isexe;isexe.sync=sync;var s=n(147);function checkPathExt(e,t){var n=t.pathExt!==undefined?t.pathExt:process.env.PATHEXT;if(!n){return true}n=n.split(";");if(n.indexOf("")!==-1){return true}for(var s=0;s<n.length;s++){var r=n[s].toLowerCase();if(r&&e.substr(-r.length).toLowerCase()===r){return true}}return false}function checkStat(e,t,n){if(!e.isSymbolicLink()&&!e.isFile()){return false}return checkPathExt(t,n)}function isexe(e,t,n){s.stat(e,(function(s,r){n(s,s?false:checkStat(r,e,t))}))}function sync(e,t){return checkStat(s.statSync(e),e,t)}},539:e=>{"use strict";const pathKey=(e={})=>{const t=e.env||process.env;const n=e.platform||process.platform;if(n!=="win32"){return"PATH"}return Object.keys(t).reverse().find((e=>e.toUpperCase()==="PATH"))||"Path"};e.exports=pathKey;e.exports["default"]=pathKey},32:(e,t,n)=>{"use strict";const s=n(638);e.exports=(e="")=>{const t=e.match(s);if(!t){return null}const[n,r]=t[0].replace(/#! ?/,"").split(" ");const o=n.split("/").pop();if(o==="env"){return r}return r?`${o} ${r}`:o}},638:e=>{"use strict";e.exports=/^#!(.*)/},207:(e,t,n)=>{const s=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys";const r=n(17);const o=s?";":":";const i=n(126);const getNotFoundError=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"});const getPathInfo=(e,t)=>{const n=t.colon||o;const r=e.match(/\//)||s&&e.match(/\\/)?[""]:[...s?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)];const i=s?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"";const c=s?i.split(n):[""];if(s){if(e.indexOf(".")!==-1&&c[0]!=="")c.unshift("")}return{pathEnv:r,pathExt:c,pathExtExe:i}};const which=(e,t,n)=>{if(typeof t==="function"){n=t;t={}}if(!t)t={};const{pathEnv:s,pathExt:o,pathExtExe:c}=getPathInfo(e,t);const a=[];const step=n=>new Promise(((o,i)=>{if(n===s.length)return t.all&&a.length?o(a):i(getNotFoundError(e));const c=s[n];const l=/^".*"$/.test(c)?c.slice(1,-1):c;const u=r.join(l,e);const f=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;o(subStep(f,n,0))}));const subStep=(e,n,s)=>new Promise(((r,l)=>{if(s===o.length)return r(step(n+1));const u=o[s];i(e+u,{pathExt:c},((o,i)=>{if(!o&&i){if(t.all)a.push(e+u);else return r(e+u)}return r(subStep(e,n,s+1))}))}));return n?step(0).then((e=>n(null,e)),n):step(0)};const whichSync=(e,t)=>{t=t||{};const{pathEnv:n,pathExt:s,pathExtExe:o}=getPathInfo(e,t);const c=[];for(let a=0;a<n.length;a++){const l=n[a];const u=/^".*"$/.test(l)?l.slice(1,-1):l;const f=r.join(u,e);const p=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;for(let e=0;e<s.length;e++){const n=p+s[e];try{const e=i.sync(n,{pathExt:o});if(e){if(t.all)c.push(n);else return n}}catch(e){}}}if(t.all&&c.length)return c;if(t.nothrow)return null;throw getNotFoundError(e)};e.exports=which;which.sync=whichSync},144:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const r=s(n(927));const o=n(147);const i=s(n(17));const c=s(n(927));const a=n(37);async function installCmake(e,{env:t}){if(t.EAS_BUILD_PLATFORM==="ios"){e.logger.info("Seeing if a simple atomic c++ program compiles...");await testCplusCompileForIos();e.logger.info("Success.")}if(t.EAS_BUILD_RUNNER!=="eas-build"){e.logger.info("We are not running in an EAS build environment, so no install is needed... Exiting.");return}if(t.EAS_BUILD_PLATFORM==="ios"){await installCmakeForIos(e,{env:t})}else{await installCmakeForAndroid(e,{env:t})}}async function installCmakeForAndroid(e,{env:t}){e.logger.info("Installing cmake and ninja from apt-get...");await(0,r.default)("sudo",["apt-get","install","--yes","cmake"],{env:t,stdio:"inherit"});await(0,r.default)("sudo",["apt-get","install","--yes","ninja-build"],{env:t,stdio:"inherit"});e.logger.info("Done.")}async function installCmakeForIos(e,{env:t}){const n="/opt/homebrew/bin/brew";const s={...t,HOMEBREW_NO_AUTO_UPDATE:"1",HOMEBREW_NO_INSTALL_CLEANUP:"1"};e.logger.info("Installing cmake from brew...");await(0,r.default)(n,["install","cmake"],{env:s,stdio:"inherit"});e.logger.info("Done.")}async function testCplusCompileForIos(){const e=`\n#include <atomic>\nstd::atomic<int> x;\nint main() {\n  return x;\n}\n  `;const t=await o.promises.mkdtemp(i.default.join((0,a.tmpdir)(),"test-"),{encoding:"utf-8"});const n=i.default.join(t,"test.cpp");await o.promises.writeFile(n,e,{encoding:"utf-8"});await(0,c.default)("c++",[n],{cwd:t,stdio:"inherit"})}t["default"]=installCmake},81:e=>{"use strict";e.exports=require("child_process")},147:e=>{"use strict";e.exports=require("fs")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}};var t={};function __nccwpck_require__(n){var s=t[n];if(s!==undefined){return s.exports}var r=t[n]={exports:{}};var o=true;try{e[n].call(r.exports,r,r.exports,__nccwpck_require__);o=false}finally{if(o)delete t[n]}return r.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var n=__nccwpck_require__(144);module.exports=n})();